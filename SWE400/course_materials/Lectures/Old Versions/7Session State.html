<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Chapter 6 Session State</title></head><body><h1>Chapter 6 - Session State</h1><ul><li>When we say an objects is "stateless," we mean is remembers nothing (no instance variables)</li><li>In
an enterprise syste, "stateless" means an object doesn't remember
things between requests - it can &nbsp;have fields, but they don't last
between requests</li><ul><li>requesting a web page - it may load stuff, but doesn't need to remember it after it sends it to you</li></ul><li>Remembering something from one request to the next is what is required to make a session "stateful"</li><li>Benefits of stateless sessions</li><ul><li>Can maintain a pool of session objects that everyone can share</li><li>Remember,
most of us are idle most of the time we are connected to a server, so
not having to remember our state allows a small pool of session objects
to serve a much larger set of users</li></ul><li>Session state&nbsp;</li><ul><li>must be remembered</li><li>isn't record data which is long-term persistent data</li><li>exists within a business transactions and is separate from other business transactions</li><ul><li>requires the ACID characteristics</li></ul><li>may included partially edited (and therefore, temporarily invalid) data</li><li>does NOT include data that the session has cached, but that doesn't have to last between requests</li></ul></ul><h2>Patterns</h2>Client Session State<br><ul><li>state information is stored on the client and appropriate information must be included in every request</li><li>cookes are an example of this</li></ul>Server Session State<br><ul><li>Server holds the state information between requests</li><ul><li>in memory</li><li>in a serialized object</li><ul><li>on the local file system</li><li>in a shared data source</li></ul></ul></ul>Database Session State<br><ul><li>Server holds the state information in a database with clear tables and fields (like persistent data)</li></ul><h2>Choosing</h2>Network concerns<br><ul><li>bandwidth: With Client Session State, session state data is sent with every request - so it had better be relatively small</li><li>security: With Client Session State, data is sent in the request, so you might need to encrypt it</li><li>integrety: With Client Session State, some data transmission errors may occur</li></ul>Isolation<br><ul><li>The effects of one session shouldn't affect another</li><li>He thinks this might get tricky with Database Session State. &nbsp;Why would it? &nbsp;How would we deal with that?</li></ul>Load balancing servers<br><ul><li>Server affinity&nbsp;</li><ul><li>forces one server to handle all requests for a given session</li></ul><li>Server migration</li><ul><li>allows a session to move from server to server between requests&nbsp;</li><li>helps with load balancing</li><li>helps with special purpose servers where one transaction may require the capabilities of more than one server</li></ul><li>Server migration is difficult with Server Session State (that data would have to be migrated, too).</li><li>Server migration is easier with Database Session State or Client Session State</li><li>Server affinity may be VERY hurtful to performance</li><ul><li>all requests from a session must go to the same server, but the router may not be able to see session ids</li><li>then routing is by IP address</li><li>if you are behind a proxy (which you usually are), that means everyone behind that proxy gets routed to the same server</li></ul></ul>Responsiveness<br><ul><li>Server Session State generally has the data close by and in a form it understands - responsive</li><li>Client Session State generally requires some parsing of the data - less responsive</li><li> Database Session State requires retrieving and re-building the object - less responsive</li><li>All of this depends on how big your session state data is</li></ul>User Canceling Transaction<br><ul><li>Easy with Client Session State!</li><li>However, they don't usually really cancel (how often do you log out of a web site?)</li><li>Generally, a timeout allows the session state to be forgotten</li><ul><li>Can work with either Server Session State or Database Session State</li></ul></ul>Think About When Bad Things Happen<br><ul><li>Client crashes&nbsp;</li><li>Server crashes</li><li>Network connection between client and server goes down (and recovers?)</li><li>Network connection between server and shared data source goes down (and recovers?)</li></ul>Development Effort<br><ul><li>Serializing an object is pretty easy and it comes back already built</li><li>Client and Database Session State generally require transformation of data and, therefore, take more time to develop&nbsp;</li></ul></body></html>